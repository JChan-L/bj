# 字符串格式化
#### 一个常见的问题是如何输出格式化的字符串。
我们经常会输出类似`'亲爱的xxx你好！今天xxx日xxx月，在一起已经有xxx天了，'`之类的字符串，而xxx的内容都是根据`变量`变化的，所以，需要一种简便的格式化字符串的方式。

在Python中，采用的格式化方式和C语言是一样得，用%实现，举例如下：

```python
print ('Hello, %s' % 'world')
>>> 'Hello, world'

print ('Hi, %s, you have $%d.' % ('JC', 1000000)) 
>>> 'Hi, JC, you have $1000000.'
```

你可能猜到了，<kbd>%</kbd> 运算符就是用来格式化字符串的。在字符串内部，%s表示用字符串替换，%d表示用整数替换，`有几个%?占位符，后面就跟几个变量或者值，顺序要对应好。`
如果只有一个 % 号，括号可以省略。

常见的占位符有：
占位符|替换内容
:--:|:--:
%d|整数
%f|浮点数
%s|字符串
%x|十六进制整数

格式化整数和浮点数还可以指定是否补0，以及控制整数与小数的位数：
```python
print ('%3d' % 3)				# 只有3个字符，但%后面只有一个字符，所以在3前面补2个空格
print ('%03d' % 3)				# 也可补0
print ('%-3d' % 3)				# 在3的后面添加2个空格
print ('%.2f' % 3.1415926535)	# 控制小数点后面的位数
```

执行结果：

```python
  3
003
3  
3.14
```

*如果你不太确定应该用什么，`%s`永远起作用，它会把任何数据类型转换为字符串：*
```python
print ('Age: %s. Gender: %s' % (18, True))
>>> 'Age: 18. Gender: True'
```

**如果我想输出一个`%`，我们要怎么输出呢**
是这样吗？
```python
earn_rate = 58
print ('今年的收益率：%d%' % earn_rate)
```
Oh,no 报错了噢！！！！
```python
Traceback (most recent call last):
  File "test.py", line 2, in <module>
    print ('今年的收益率：%s%' % earn_rate)
ValueError: incomplete format
```

我们应该这样写：
```python
earn_rate = 58
print ('今年的收益率：%d%%' % earn_rate)
```
> 今年的收益率：58%

我们需要使用两个 `%` 来转义

**format( )**
另一种格式化字符串的方法是使用字符串的format()方法，它会用传入的参数依次替换字符串内的占位符{0}、{1}……
```python
print ('Hi, {0}, 成绩提升了 {1}%'.format('小明', 17.165))
>>> 'Hi, 小明, 成绩提升了 17.125%'
```

如果我只想保留一位小数，我们可以这样做：

```python
print ('Hi, {0}, 成绩提升了 {1:.1f}%'.format('小明', 17.165))
>>> 'Hi, 小明, 成绩提升了 17.2%'   	# 会有四舍五入
```
**f-string**
最后一种是使用以 `f` 开头的字符串，称为f-string，它和普通字符串不同之处在于，字符串如果包含{xxx}，就会以对应的变量替换：

```python
r = 2.5
s = 3.14 * r ** 2	# 两个乘号，表示乘方，这里指3.14*r的2次方
print(f'The area of a circle with radius {r} is {s:.2f}')
```

执行结果：
> The area of a circle with radius 2.5 is 19.62

上述代码中，`{r}` 被变量`r`的值替换，`{s:.2f}` 被变量`s`的值替换，并且`:`后面的`.2f`指定了格式化参数（即保留两位小数），因此，{s:.2f}的替换结果是19.62。